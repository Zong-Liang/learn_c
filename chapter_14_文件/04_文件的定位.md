# 04_文件的定位

对文件进行操作时，往往不需要从头开始，而是只操作指定内容。这时，就需要使用文件定位函数来实现对文件的随机读取。

## `fseek`函数

`fseek`函数的作用是移动文件内部的位置指针。

```c
fseek(文件类型指针, 位移量, 起始点);
```

其中，“文件类型指针”指向被移动的文件；“位移量”表示移动的字节数，一般为`long`型数据，以保证文件长度大于64KB时不会出错；“起始点”表示从何处开始计算位移量，一般是文件首、文件当前位置和文件尾，

|    起始点    | 表示符号 | 数字表示 |
| :----------: | :------: | :------: |
|    文件首    | SEEK-SET |    0     |
| 文件当前位置 | SEEK-CUR |    1     |
|    文件尾    | SEEK-END |    2     |

```C
// 将位置指针从当前位置向后退20个字节
fseek(fp, -20L, 1);
```

>  注意，`fseek`函数一般用于二进制文件。在文本文件中使用时，由于要进行转换，计算的位置会出现错误。

文件的随机读写在移动位置指针之后进行，即可用前面介绍的任一种读写函数进行读写。

## `rewind`函数

`rewind`函数用于将位置指针重返文件开头，没有返回值。

```c
int rewind(文件类型指针);
```

## `ftell`函数

`ftell`函数可得到流式文件中的当前位置，并使用相对于文件头的位移量表示。

```c
long ftell(文件类型指针);
```

当`ftell`函数的返回值为−1L时，表示出错。
