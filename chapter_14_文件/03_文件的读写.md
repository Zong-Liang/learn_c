# 03_文件的读写

打开文件后，可对文件进行读出或写入的操作。

## `fputc`函数

`fputc`函数用于把一个字符写到磁盘文件（`fp`所指向的文件）中。

```c
ch = fputc(ch, fp);
```

其中，`ch`是要写入的字符，可以是一个字符常量，也可以是一个字符变量。`fp`是文件指针变量，如果函数写入成功，则返回值就是写入的字符；如果写入失败，则返回`EOF`。

## `fgetc`函数

`fgetc`函数用于从指定文件（`fp`指向的文件）中读取一个字符赋予`ch`。

```c
ch = fgetc(fp);
```

注意，文件必须以读或读写方式打开。当函数遇到文件结束符时，将返回文件结束标志`EOF`。

> `fgets`函数和`gets`函数的区别如下。`gets`函数读完回车换行（'\n'），并不存储它；`fgets`函数存储换行符并在其后写一个null character（'\0'）。不能简单地把`fgets`函数理解为`gets`函数限制字符数目的stdin加强版。在改用`fgets`函数后，应该注意把字符串末尾之前的'\n'删除。

## `fputs`函数

`fputs`函数与`fputc`函数类似，用于向指定的文件写入一个字符串。

```c
fputs(字符串, 文件指针)
```

其中，字符串可以是字符串常量，也可以是字符数组名、指针或变量。

## `fgets`函数

`fgets`函数与`fgetc`函数类似，用于从指定的文件中读取一个字符串到字符数组中。

```c
fgets(字符数组名, n, 文件指针);
```

其中，n表示读取的字符串中字符的个数（包含“\0”）。

## `fprintf`函数

前面讲过`printf`和`scanf`函数，两者都是格式化读写函数。`fprintf`和`fscanf`函数与之相似，但读写对象不是终端，而是磁盘文件。

```c
ch = fprintf(文件类型指针, 格式字符串, 输出列表);
```

```c
fprintf(fp, "%d", i);
```

## `fscanf`函数

```c
fscanf(文件类型指针, 格式字符串, 输入列表);
```

```c
fscanf(fp, "%d", &i);
```

## `fread`和`fwrite`函数

实际开发中，往往需要对整块数据进行读写，例如，对一个结构体类型变量值进行读写。

`fread`函数的功能是：从`fp`指向的文件中读取`count`次，每次读`size`字节，读取的信息保存在`buffer`地址中。

```c
fread(buffer, size, count, fp);
```

`fwrite`函数的功能是：将`buffer`地址开始的信息输出`count`次，每次写`size`字节到`fp`指向的文件中。

```c
fwrite(buffer, size, count, fp);
```

- `buffer`：一个指针。对`fwrite`函数来说，是待输出数据的地址（起始地址）；对`fread`函数来说，是待读取数据存放的地址。
- `size`：要读写的字节数。
- `count`：要读写多少个`size`字节的数据项。
- `fp`：文件类型指针。

```c
// 从fp指向的文件中每次读取两个字节并保存在数组a中，连续读取3次
fread(a, 2, 3, fp);
```

```c
// 将数组a中的信息每次输出两个字节到fp指向的文件中，连续输出3次
fwrite(a, 2, 3, fp);
```
