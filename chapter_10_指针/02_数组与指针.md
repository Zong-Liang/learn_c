# 02_数组与指针

使用数组时，系统需要提供一段连续的内存来存储数组中的各元素，如果把数组的地址赋给指针变量，就可以通过指针变量来引用数组。

## 一维数组与指针

定义一维数组时，系统会在内存中为其分配一段存储空间，数组名就是数组在内存中的首地址。若再定义一个指针变量，并将数组的首地址传给指针变量，则该指针就指向了这个一维数组。

```c
int *p, a[10];
p = a;
```

这里`a`是数组名，也就是数组的首地址，将它赋给指针变量`p`，也就是将数组`a`的首地址赋给`p`。

```c
int *p, a[10];
p = &a[0];
```

上面的语句是将数组`a`中首个元素的地址赋给指针变量`p`。由于`a[0]`的地址就是数组的首地址，因此上述两条赋值语句的操作效果完全相同。

## 二维数组与指针

对于一个 m 行 n 列的二维数组`a[m][n]`，其元素地址的表示方法如下。

- `a`表示二维数组的首地址，也表示数组第 1 行的首地址，`a+1` 表示第 2 行的首地址，`a+m` 表示第 m+1 行的首地址。
- `a[0]+n`表示数组第 1 行第 n+1 个元素的地址，`a[m]+n` 表示第 m+1 行第 n+1 个元素的地址。
- `&a[0]` 表示数组第1行的首地址，`&a[m]` 表示第 m+1 行的首地址。
- `&a[0][0]` 既可以表示数组第 1 行 1 列的首地址，也可以看作整个数组的首地址。`&a[m][n]` 就是第 m+1 行 n+1 列元素的地址。
- 指针也可表示地址，因此通过指针可以引用二维数组中的元素。
- `((a+m)+n)` 和 `*(a[m]+n)` 含义相同，都表示数组第 m+1 行第 n+1 列元素。

> 利用指针引用二维数组的关键是要记住`*(a+i)`与`a[i]`是等价的。

## 字符串与指针

可以通过两种方式访问一个字符串，一是使用字符数组，二是使用字符指针。

```c
char *str;
str = "hello c!";

char *str = "hello c!";
```

<img src="https://cdn.jsdelivr.net/gh/ZL85/ImageBed@main//202401292027589.png" alt="Snipaste_2024-01-29_20-27-16" style="zoom:50%;" />

## 指针数组

字符数组是一个一维数组，而字符串数组是以字符串作为数组元素的数组，可以将其看成一个二维字符数组。

```c
char country[5][20]={
    "china",
    "japan",
    "russia",
    "germany",
    "switzerland"
}
```

上述代码中，字符型数组变量`country`被定义为含有5个字符串的数组， 每个字符串的长度都必须小于20 （ 这里要考虑字符串最后的“\0”）。

通过观察上面定义的字符串数组可以发现，像"China"和"Japan"这样的字符串的长度仅为5，加上字符串结束符也仅为6，而内存中却要给它们分别分配一个20字节的空间，空间浪费较大。为了解决这个问题，可以使用指针数组，使每个指针指向所需要的字符常量。这种方法需要在数组中保存字符指针，虽然也占用空间，但要远少于字符串数组占用的空间。

什么是指针数组呢？一个数组，如果其元素均为指针类型数据，则该数组称为指针数组。也就是说，指针数组中的每一个元素都相当于一个指针变量。

```c
类型名 数组名[数组长度]
```





